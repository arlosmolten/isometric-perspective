<!-- Isometric Token Configuration -->
<section class="isometric-form token-isometric">
  <div class="form-group">
    <label>{{localize 'isometric-perspective.token_enableIsometric_name'}}</label>
    <div class="form-fields">
      <input type="checkbox"
             name="flags.isometric-perspective.isoTokenDisabled"
             title="Disable isometric transform on this token"
             {{#if isoTokenDisabled}}checked{{/if}}>
    </div>
    <p class="notes">{{localize 'isometric-perspective.token_enableIsometric_hint'}}</p>
  </div>

  <hr>

  <div class="form-group offset-point">
    <label>{{localize 'isometric-perspective.token_artOffset_name'}}</label>
    <div class="form-fields">
      <label class="axisX">X</label>
      <input type="number"
             name="flags.isometric-perspective.offsetY"
             title="Offset Y in pixels"
             value="{{offsetY}}"
             step="1">
      <button class="fine-adjust" title="Hold and drag to fine-tune X and Y">✥</button>
      <input type="number"
             name="flags.isometric-perspective.offsetX"
             title="Offset X in pixels"
             value="{{offsetX}}"
             step="1">
      <label class="axisY">Y</label>
    </div>
    <p class="notes">{{localize 'isometric-perspective.token_artOffset_hint'}}</p>
  </div>

  <div class="form-group anchor-point">
    <label>{{localize 'isometric-perspective.token_isoAnchor_name'}}</label>
    <div class="form-fields">
      <label class="anchorToggle">{{localize 'isometric-perspective.token_isoAnchor_save'}}</label>
      <input type="checkbox"
             name="isoAnchorToggle"
             title="Show anchor alignment lines"
             {{#if isoAnchorToggle}}checked{{/if}}>
      <label class="axisX">X</label>
      <input type="number"
             name="flags.isometric-perspective.isoAnchorY"
             title="Isometric anchor Y (0-1)"
             value="{{isoAnchorY}}"
             step="0.01">
      <button class="fine-adjust-anchor" title="Hold and drag to fine-tune X and Y">✥</button>
      <input type="number"
             name="flags.isometric-perspective.isoAnchorX"
             title="Isometric anchor X (0-1)"
             value="{{isoAnchorX}}"
             step="0.01">
      <label class="axisY">Y</label>
    </div>
    <p class="notes">{{localize 'isometric-perspective.token_isoAnchor_hint'}}</p>
  </div>

  <div class="form-group">
    <label>{{localize 'isometric-perspective.token_scale_name'}}</label>
    <div class="form-fields">
      <input type="range"
             name="flags.isometric-perspective.scale"
             title="Token isometric scale"
             value="{{scale}}"
             min="0.01" max="3" step="0.01"
             class="scale-slider">
      <span class="range-value">{{scale}}</span>
    </div>
    <p class="notes">{{localize 'isometric-perspective.token_scale_hint'}}</p>
  </div>

  <div class="form-group">
    <label>{{localize 'isometric-perspective.token_disableScale_name'}}</label>
    <div class="form-fields">
      <input type="checkbox"
             name="flags.isometric-perspective.isoScaleDisabled"
             title="Disable token auto-scale"
             {{#if isoScaleDisabled}}checked{{/if}}>
    </div>
    <p class="notes">{{localize 'isometric-perspective.token_disableScale_hint'}}</p>
  </div>

  <style>
    .offset-point .form-fields {
      display: flex;
      gap: 0.5em;
    }
    .offset-point .axisX,
    .offset-point .axisY,
    .anchor-point .axisX,
    .anchor-point .axisY,
    .anchor-point .anchorToggle {
      flex: 0 0 60px;
      line-height: var(--form-field-height);
      text-align: center;
      color: var(--color-text-dark-secondary);
    }
    .offset-point input {
      flex: 1;
    }
    .anchor-point .form-fields {
      display: flex;
      gap: 0.5em;
      align-items: center;
    }
    .scale-slider {
      flex: 4;
    }
    .range-value {
      flex: 1;
      text-align: center;
      line-height: var(--form-field-height);
    }
  </style>
</section>
